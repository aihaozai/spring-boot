<!DOCTYPE html>
<html>
<body>
<div class="layadmin-tabsbody-item layui-show">
	<div class="layui-fluid">
		<div class="layui-row layui-col-space15">
			<div class="layui-card">
				<div class="layui-layout">
					<div id="allmap" style="width: 100%;height: 100%;overflow: hidden;margin: 0;font-family: 微软雅黑"></div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>

</html>
<script th:inline="javascript">
	layui.use(['layer'], function () {
		var layer = layui.layer;
		// 百度地图API功能
		var map = new BMap.Map("allmap",{ logo:false}); // 创建Map实例
		map.centerAndZoom(new BMap.Point(116.404, 39.915), 16); // 初始化地图,设置中心点坐标和地图级别
		//添加地图类型控件
		map.addControl(new BMap.MapTypeControl({
			mapTypes: [
				BMAP_NORMAL_MAP,
				BMAP_HYBRID_MAP
			]
		}));
		map.setCurrentCity("北京"); // 设置地图显示的城市 此项是必须设置的
		map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
		//定位到当前位置
		var geolocation = new BMap.Geolocation();
		// 开启SDK辅助定位
		geolocation.enableSDKLocation();
		var gc = new BMap.Geocoder();//地址解析类
		geolocation.getCurrentPosition(function(r){
			if(this.getStatus() == BMAP_STATUS_SUCCESS){
				var mk = new BMap.Marker(r.point);
				map.addOverlay(mk);
				map.panTo(r.point);
				layer.msg('您的位置：' + r.point.lng + ',' + r.point.lat);

				var pt = r.point;
				map.panTo(pt);//移动地图中心点
				//alert(r.point.lng);//X轴
				//alert(r.point.lat);//Y轴

				gc.getLocation(pt, function(rs){
					var addComp = rs.addressComponents;
					//alert(addComp.city);
					layer.msg(addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber, {
						time:false,
						btn: ['知道了','关闭']
					});
					layer.msg(addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber);
				});

			}
			else {
				layer.msg('定位失败:状态'+this.getStatus(), {
					time:false,
					btn: ['知道了','关闭']
				});
			}
		});
	});
</script>
<script type="text/javascript">


</script>